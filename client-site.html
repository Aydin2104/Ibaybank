<!DOCTYPE html><html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Клиентский сайт | Ibay Bank</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800">
  <div class="max-w-5xl mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">Клиентский сайт Ibay Bank</h1><section class="bg-white rounded shadow p-4 mb-6">
  <h2 class="text-xl font-semibold mb-4">Вход в систему</h2>
  <input id="loginCardNumber" placeholder="Номер карты" class="border p-2 rounded mb-4 w-full">
  <input id="loginCardPassword" type="password" placeholder="PIN-код" class="border p-2 rounded mb-4 w-full">
  <button onclick="login()" class="bg-blue-600 text-white py-2 px-4 rounded w-full">Войти</button>
</section>

<section class="bg-white rounded shadow p-4 mb-6" id="accountSection" style="display: none;">
  <h2 class="text-xl font-semibold mb-4">Ваш аккаунт</h2>
  <div class="mb-4">
    <p id="accountInfo" class="text-lg"></p>
  </div>
  <h3 class="text-lg font-semibold mb-2">Перевод средств</h3>
  <input id="transferAmount" type="number" placeholder="Сумма перевода" class="border p-2 rounded mb-4 w-full">
  <input id="transferCardNumber" placeholder="Номер карты получателя" class="border p-2 rounded mb-4 w-full">
  <button onclick="transferMoney()" class="bg-green-600 text-white py-2 px-4 rounded w-full">Перевести</button>
</section>

  </div>  <script>
    let currentUser = null;
    let users = [];

    function loadUsers() {
      const fileInput = document.getElementById('fileInput');
      const file = fileInput.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = e => {
        try {
          const data = JSON.parse(e.target.result);
          users = data.users || [];
        } catch (err) {
          alert('Ошибка загрузки файла с пользователями');
        }
      };
      reader.readAsText(file);
    }

    function login() {
      const cardNumber = document.getElementById('loginCardNumber').value;
      const cardPassword = document.getElementById('loginCardPassword').value;

      currentUser = users.find(u => u.cardNumber === cardNumber && u.cardPassword === cardPassword);

      if (currentUser) {
        document.getElementById('accountSection').style.display = 'block';
        document.getElementById('accountInfo').textContent = `Имя: ${currentUser.firstName} ${currentUser.lastName}\nБаланс: ${currentUser.balance.toFixed(2)} AZN`;
        document.getElementById('loginCardNumber').disabled = true;
        document.getElementById('loginCardPassword').disabled = true;
      } else {
        alert('Неверный номер карты или PIN-код');
      }
    }

    function transferMoney() {
      const amount = parseFloat(document.getElementById('transferAmount').value);
      const recipientCardNumber = document.getElementById('transferCardNumber').value;

      if (isNaN(amount) || amount <= 0) {
        alert('Введите корректную сумму перевода');
        return;
      }

      const recipient = users.find(u => u.cardNumber === recipientCardNumber);
      if (!recipient) {
        alert('Получатель не найден');
        return;
      }

      if (currentUser.balance < amount) {
        alert('Недостаточно средств');
        return;
      }

      currentUser.balance -= amount;
      recipient.balance += amount;
      alert(`Перевод ${amount.toFixed(2)} AZN на карту ${recipientCardNumber} выполнен успешно!`);
      document.getElementById('accountInfo').textContent = `Имя: ${currentUser.firstName} ${currentUser.lastName}\nБаланс: ${currentUser.balance.toFixed(2)} AZN`;
    }
  </script></body>
</html>